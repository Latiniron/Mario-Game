<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mario Game</title>
  <meta property="og:title" content="Mario Browser Game">
  <meta property="og:description" content="Ein kleines Mario-inspiriertes Browser-Spiel.">
  <meta property="og:type" content="article">
  <meta property="og:image" content="https://latiniron.github.io/Mario-Game/MarioGame.jpg">
  <style>
    :root{--bg:#78c0ff;--ground:#6b4f2f;--block:#c77f3a;--player:#ffdd57;--enemy:#d9534f;--coin:#ffd700}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);}
    #gameWrap{display:flex;flex-direction:column;align-items:center;padding:12px;position:relative;}
    
    /* 1. Responsive Canvas */
    canvas{background:linear-gradient(#78c0ff 0%, #a0e1ff 60%);border:6px solid #333;border-radius:8px;image-rendering:pixelated; width: 100%; max-width: 800px; height: auto;}
    
    /* Responsive Anpassungen für kleine Bildschirme */
    @media (max-width: 820px) {
        canvas {
            width: 95%;
            height: calc(95vw * 450 / 800);
        }
        #hud {
            width: 95%;
        }
    }

    #hud{width:800px;max-width:95%;display:flex;justify-content:space-between;margin-top:8px;color:#222}
    .btn{padding:6px 10px;border-radius:6px;border:1px solid rgba(0,0,0,0.2);cursor:pointer;background:white}
    #info{font-size:14px}
    .links{max-width:800px;margin-top:12px;color:#222;font-size:13px;display:flex;gap:8px;flex-wrap:wrap}
    .links a{color:#0645ad;text-decoration:none;padding:6px 8px;border-radius:6px;border:1px solid rgba(0,0,0,0.06);background:rgba(255,255,255,0.9)}
    .screenshot{max-width:800px;margin-top:10px;color:#222;font-size:13px;}
    .screenshot img{max-width:100%;border-radius:6px;border:1px solid rgba(0,0,0,0.08)}
    #footerNote{max-width:800px;margin-top:8px;color:#222;font-size:12px;opacity:0.9}

    /* 2. Styles für die virtuellen Touch-Buttons */
    #touch-controls {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      display: none; 
      padding: 15px;
      box-sizing: border-box;
      z-index: 100;
      justify-content: space-between;
      pointer-events: none;
    }

    /* Nur auf Mobilgeräten anzeigen */
    @media (max-width: 600px) {
      #touch-controls {
        display: flex;
      }
    }

    .touch-btn {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      font-size: 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      user-select: none;
      pointer-events: auto;
      touch-action: manipulation;
      border: 3px solid rgba(255, 255, 255, 0.8);
      opacity: 0.8;
    }
    .touch-btn:active {
      opacity: 1.0;
      background: rgba(0, 0, 0, 0.8);
    }

    #jump-btn {
      margin-right: 15px;
    }
    #move-btns {
      display: flex;
      gap: 15px;
      margin-left: 15px;
    }

  </style>
</head>
<body>
  <div id="gameWrap">
    <canvas id="game" width="800" height="450"></canvas>
    <div id="hud">
      <div id="info">Punkte: <span id="score">0</span> • Leben: <span id="lives">3</span></div>
      <div>
        <button id="restart" class="btn">Neu starten</button>
        <button id="fullscreen" class="btn">Vollbild</button>
      </div>
    </div>

    <div class="links">
      <a href="https://github.com/Latiniron/Mario-Game" target="_blank" rel="noopener">Repo</a>
      <a href="https://github.com/Latiniron/Mario-Game/blob/main/README.md" target="_blank" rel="noopener">README.md</a>
      <a href="https://latiniron.github.io/Mario-Game/MarioGame.jpg" target="_blank" rel="noopener">Screenshot</a>
    </div>

    <div class="screenshot">
      <img src="MarioGame.jpg" alt="Mario Game Screenshot" onerror="this.style.display='none'"/>
    </div>

    <div style="max-width:800px;margin-top:10px;color:#222;font-size:13px;">
      Steuerung: ← → oder A/D zum Laufen, Leertaste oder W zum Springen. (Auf Mobilgerät: Virtuelle Tasten).
    </div>

    <div id="footerNote">
      Hinweis: Bild und index.html müssen im Repo-Root liegen. Groß-/Kleinschreibung beachten!
    </div>
  </div>

  <div id="touch-controls">
    <div id="move-btns">
      <div id="left-btn" class="touch-btn">◀</div>
      <div id="right-btn" class="touch-btn">▶</div>
    </div>
    <div id="jump-btn" class="touch-btn">↑</div>
  </div>

  <script>
    // **************************************************************************************
    // SCHRITT 1: FÜGE HIER DEINEN VOLLSTÄNDIGEN MARIO-SPIELCODE (die Engine) EIN!
    // Stellen Sie sicher, dass Ihr Code eine `window.keys = { left: false, right: false, up: false }`
    // oder ein ähnliches Steuerungsobjekt verwendet.
    // **************************************************************************************

    // Annahme: Wenn Ihr Code window.keys nicht definiert, wird es hier als Platzhalter erstellt:
    window.keys = window.keys || { left: false, right: false, up: false }; 


    // **************************************************************************************
    // SCHRITT 2: NEUSTART-FUNKTION FÜR DEN BUTTON
    // **************************************************************************************

    /**
     * Setzt das Spiel zurück. DIES IST DIE FUNKTION FÜR DEN BUTTON!
     */
    window.restartGame = function() {
        console.log("Spiel wird neu gestartet...");
        
        // ******************************************************************************
        // BITTE HIER DEINE EIGENE SPIEL-RESET-LOGIK EINFÜGEN!
        // (z.B. Spielerposition zurücksetzen, Level neu laden, Punkte/Leben zurücksetzen)
        // ******************************************************************************

        // Beispiel-Reset der HUD-Anzeige (Muss mit den echten Spielvariablen übereinstimmen)
        document.getElementById('score').textContent = '0';
        document.getElementById('lives').textContent = '3';
    };


    // **************************************************************************************
    // SCHRITT 3: HINZUFÜGEN DER TOUCH-EVENTS & BUTTON-LISTENER
    // **************************************************************************************

    document.addEventListener('DOMContentLoaded', () => {
      // Zugriff auf die Buttons
      const leftBtn = document.getElementById('left-btn');
      const rightBtn = document.getElementById('right-btn');
      const jumpBtn = document.getElementById('jump-btn');
      const restartBtn = document.getElementById('restart');

      // Funktion zum Starten der Bewegung (wird bei Touch-Start aufgerufen)
      function handleTouchStart(controlVariable) {
        if (window.keys && window.keys.hasOwnProperty(controlVariable)) {
          window.keys[controlVariable] = true;
        }
      }

      // Funktion zum Stoppen der Bewegung (wird bei Touch-Ende aufgerufen)
      function handleTouchEnd(controlVariable) {
        if (window.keys && window.keys.hasOwnProperty(controlVariable)) {
          window.keys[controlVariable] = false;
        }
      }

      // --------------------------------------------------------------------------------------
      // A. EVENT LISTENER FÜR DEN NEU STARTEN BUTTON (Neu hinzugefügt)
      // --------------------------------------------------------------------------------------
      restartBtn.addEventListener('click', window.restartGame);


      // --------------------------------------------------------------------------------------
      // B. EVENT LISTENER FÜR DIE SEITLICHE BEWEGUNG (Links/Rechts)
      // --------------------------------------------------------------------------------------
      
      // Button Links (◀)
      leftBtn.addEventListener('pointerdown', () => handleTouchStart('left'));
      leftBtn.addEventListener('pointerup', () => handleTouchEnd('left'));
      leftBtn.addEventListener('pointerleave', () => handleTouchEnd('left'));

      // Button Rechts (▶)
      rightBtn.addEventListener('pointerdown', () => handleTouchStart('right'));
      rightBtn.addEventListener('pointerup', () => handleTouchEnd('right'));
      rightBtn.addEventListener('pointerleave', () => handleTouchEnd('right'));


      // --------------------------------------------------------------------------------------
      // C. EVENT LISTENER FÜR DEN SPRUNG-BUTTON (↑)
      // --------------------------------------------------------------------------------------
      jumpBtn.addEventListener('pointerdown', () => {
        // Setzt die Sprung-Variable kurz auf true, um einen Tastendruck zu simulieren
        if (window.keys) {
          window.keys.up = true;
          // Setzt die Variable kurz danach wieder auf false, um Dauersprung zu vermeiden
          setTimeout(() => { window.keys.up = false; }, 50); 
        }
      });
      
      // Verhindert das Standardverhalten des Browsers (z.B. Scrollen) beim Tippen auf die Steuerung
      const controlsDiv = document.getElementById('touch-controls');
      controlsDiv.addEventListener('touchstart', (e) => e.preventDefault(), { passive: false });
      controlsDiv.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });

    });

  </script>
</body>
</html>
